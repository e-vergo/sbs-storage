# Retrospective: Epic #224 Waves 4-7 Scoping

## What happened
Scoped the remaining features for the SBS Rewrite Epic (#224). Waves 1-3 were already complete (caching infrastructure, unified TeX/Lean model, delimiter embedding + bidirectional linking).

The user provided a key architectural insight: instead of treating caching as a separate concern, move Dress upstream into Lake's normal build so Lake's native incremental compilation handles artifact caching. Combined with the ambition to fork Lean's infoview for direct IDE integration and optimize SubVerso for sub-200ms live highlighting, this reframed the entire remaining work.

## Decisions made
1. **Lake-first caching:** Lake's incremental compilation is the primary caching strategy. Custom caching only for global operations (graph, manifest, site).
2. **Full stack ambition:** Dress in Lake + Lean infoview fork + SubVerso live performance (sub-200ms).
3. **5 tracks, 3 crushes, 14 issues:** Decomposed into Foundation → Performance + Infoview → Polish + Live Dev.

## Issues created
- Crush 1: #245 (SubVerso profiling), #246 (Dress audit), #247 (Dress integration), #248 (incremental validation), #249 (statement validator)
- Crush 2: #250 (SubVerso optimization), #251 (lazy highlighting), #252 (infoview fork), #253 (RPC wiring), #254 (cross-referencing)
- Crush 3: #255 (LaTeX rendering), #256 (interactive navigation), #257 (watch mode), #258 (live reload)

## What went well
- Deep codebase exploration before decomposition grounded the plan in reality (existing infrastructure, actual gaps)
- User's architectural reframe (Lake-first caching, Dress upstream) was caught and incorporated immediately
- IO captured: well-researched decomposition process was recognized as effective

## What to improve
- First issue creation batch failed due to invalid labels — should have checked available labels upfront
- Original decomposition (Waves 4-5 from the issue) was superseded by the architectural reframe — the scoping pivoted mid-conversation which was appropriate but worth noting