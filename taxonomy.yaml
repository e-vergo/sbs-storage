# Unified Taxonomy v3.0
# Combines GitHub issue labels and archive auto-tags into a single source of truth.
#
# contexts field on each entry:
#   issues  -- GitHub issue labels only
#   archive -- archive auto-tags only
#   both    -- used in both systems
#
# scope field (archive-context entries only):
#   entry   -- varies between entries in a session (per-entry state)
#   session -- constant across all entries in a session (aggregate metrics)
#   both    -- may vary or be constant depending on context

version: "3.0"
description: "Unified taxonomy for GitHub issue labels and archive auto-tags"

dimensions:
  # ===========================================================================
  # origin -- Who initiated this issue
  # ===========================================================================
  origin:
    description: "Who initiated this issue"
    color: "#9E9E9E"
    entries:
      - name: "origin:user"
        description: "User requested this issue be filed"
        contexts: [issues]
      - name: "origin:agent"
        description: "Agent identified and filed independently"
        contexts: [issues]
      - name: "origin:self-improve"
        description: "Surfaced by /self-improve analysis cycle"
        contexts: [issues]
      - name: "origin:gate-failure"
        description: "Generated from a failed quality gate"
        contexts: [issues]

  # ===========================================================================
  # type -- What kind of work
  # ===========================================================================
  type:
    description: "What kind of work"
    entries:
      - name: "bug:visual"
        color: "#d73a4a"
        description: "Incorrect rendering, styling, layout"
        contexts: [issues]
      - name: "bug:functional"
        color: "#d73a4a"
        description: "Broken behavior, wrong output"
        contexts: [issues]
      - name: "bug:build"
        color: "#d73a4a"
        description: "Build pipeline failure"
        contexts: [issues]
      - name: "bug:regression"
        color: "#d73a4a"
        description: "Something that previously worked"
        contexts: [issues]
      - name: "bug:data"
        color: "#d73a4a"
        description: "Incorrect data in ledger, archive, manifest"
        contexts: [issues]
      - name: "feature:new"
        color: "#0E8A16"
        description: "Entirely new capability"
        contexts: [issues]
      - name: "feature:enhancement"
        color: "#0E8A16"
        description: "Improving existing capability"
        contexts: [issues]
      - name: "feature:integration"
        color: "#0E8A16"
        description: "Connecting existing systems"
        contexts: [issues]
      - name: "idea:exploration"
        color: "#d876e3"
        description: "Open-ended investigation"
        contexts: [issues]
      - name: "idea:design"
        color: "#d876e3"
        description: "Architectural or UX design concept"
        contexts: [issues]
      - name: "idea:architecture"
        color: "#d876e3"
        description: "Structural change to how systems relate"
        contexts: [issues]
      - name: "behavior"
        color: "#fbca04"
        description: "Change to Claude personality, workflow, or meta-cognitive rules"
        contexts: [issues]
      - name: "housekeeping:docs"
        color: "#CFD8DC"
        description: "Documentation updates"
        contexts: [issues]
      - name: "housekeeping:cleanup"
        color: "#CFD8DC"
        description: "Code cleanup, dead code removal"
        contexts: [issues]
      - name: "housekeeping:tooling"
        color: "#CFD8DC"
        description: "Toolchain maintenance"
        contexts: [issues]
      - name: "housekeeping:debt"
        color: "#CFD8DC"
        description: "Technical debt payoff"
        contexts: [issues]
      - name: "housekeeping:migration"
        color: "#CFD8DC"
        description: "Data format migration or schema evolution"
        contexts: [issues]
      - name: "investigation"
        color: "#0e8a16"
        description: "Root-cause analysis, profiling, debugging"
        contexts: [issues]

  # ===========================================================================
  # area_sbs -- Which part of the generated product
  # ===========================================================================
  area_sbs:
    description: "Which part of the generated product"
    color: "#1565C0"
    entries:
      - name: "area:sbs:graph"
        description: "Dependency graph (layout, SVG, modals, pan/zoom)"
        contexts: [issues]
      - name: "area:sbs:dashboard"
        description: "Dashboard (stats, key theorems, messages, notes)"
        contexts: [issues]
      - name: "area:sbs:paper"
        description: "Paper HTML generation (ar5iv, verification badges)"
        contexts: [issues]
      - name: "area:sbs:pdf"
        description: "PDF compilation (tectonic/pdflatex)"
        contexts: [issues]
      - name: "area:sbs:sidebar"
        description: "Chapter sidebar navigation, active highlighting"
        contexts: [issues]
      - name: "area:sbs:modal"
        description: "Proof modals, node detail popups"
        contexts: [issues]
      - name: "area:sbs:theme"
        description: "Dark/light mode toggle, localStorage persistence"
        contexts: [issues]
      - name: "area:sbs:css"
        description: "CSS variables, common.css, blueprint.css, dep_graph.css"
        contexts: [issues]
      - name: "area:sbs:js"
        description: "verso-code.js, plastex.js, Tippy.js integration"
        contexts: [issues]
      - name: "area:sbs:blueprint"
        description: "@[blueprint] attribute, metadata fields, status options"
        contexts: [issues]
      - name: "area:sbs:color-model"
        description: "6-status color system (notReady through mathlibReady)"
        contexts: [issues]
      - name: "area:sbs:tooltips"
        description: "Tippy.js hover info, type signatures, tactic states"
        contexts: [issues]
      - name: "area:sbs:latex"
        description: "LaTeX parsing, plasTeX, inputleanmodule"
        contexts: [issues]
      - name: "area:sbs:highlighting"
        description: "SubVerso syntax highlighting, rainbow brackets"
        contexts: [issues]
      - name: "area:sbs:chapter"
        description: "Chapter page rendering, side-by-side display, proof toggles"
        contexts: [issues]
      - name: "area:sbs:ci"
        description: "GitHub Actions, dress-blueprint-action"
        contexts: [issues]

  # ===========================================================================
  # area_devtools -- Which part of the development toolchain
  # ===========================================================================
  area_devtools:
    description: "Which part of the development toolchain"
    color: "#00695C"
    entries:
      - name: "area:devtools:archive"
        description: "Archive entries, index, epochs, upload, sync"
        contexts: [issues]
      - name: "area:devtools:cli"
        description: "sbs CLI commands"
        contexts: [issues]
      - name: "area:devtools:mcp"
        description: "MCP server tools, sbs-lsp-mcp"
        contexts: [issues]
      - name: "area:devtools:validators"
        description: "T1-T8 validator implementations"
        contexts: [issues]
      - name: "area:devtools:oracle"
        description: "Oracle compiler, concept index, extractors"
        contexts: [issues]
      - name: "area:devtools:skills"
        description: "Skill definitions, phase workflows"
        contexts: [issues]
      - name: "area:devtools:tagging"
        description: "Auto-tagging engine, rules.yaml, hooks"
        contexts: [issues]
      - name: "area:devtools:gates"
        description: "Gate definitions, parsing, evaluation"
        contexts: [issues]
      - name: "area:devtools:session-data"
        description: "Claude session extraction, JSONL parsing"
        contexts: [issues]
      - name: "area:devtools:quality-ledger"
        description: "Quality score persistence, staleness, scoring"
        contexts: [issues]
      - name: "area:devtools:compliance"
        description: "Compliance ledger, page criteria, hybrid validation"
        contexts: [issues]
      - name: "area:devtools:capture"
        description: "Screenshot capture, Playwright, interactive states"
        contexts: [issues]
      - name: "area:devtools:porcelain"
        description: "ensure_porcelain(), submodule commit flow"
        contexts: [issues]
      - name: "area:devtools:icloud-sync"
        description: "iCloud archive sync"
        contexts: [issues]
      - name: "area:devtools:state-machine"
        description: "global_state, skill lifecycle, handoff protocol"
        contexts: [issues]
      - name: "area:devtools:self-improve"
        description: "Self-improvement analysis tools, 4 pillars"
        contexts: [issues]
      - name: "area:devtools:question-analysis"
        description: "AskUserQuestion extraction, question stats"
        contexts: [issues]
      - name: "area:devtools:test-suite"
        description: "Pytest infrastructure, fixtures, tiers"
        contexts: [issues]

  # ===========================================================================
  # area_lean -- Which Lean repo or framework component
  # ===========================================================================
  area_lean:
    description: "Which Lean repo or framework component"
    color: "#E65100"
    entries:
      - name: "area:lean:architect"
        description: "LeanArchitect (attribute, env extension, node model)"
        contexts: [issues]
      - name: "area:lean:dress"
        description: "Dress (artifact generation, graph layout, SVG)"
        contexts: [issues]
      - name: "area:lean:runway"
        description: "Runway (site generation, dashboard, paper, theme)"
        contexts: [issues]
      - name: "area:lean:verso"
        description: "Verso framework (genres, SBSBlueprint, VersoPaper)"
        contexts: [issues]
      - name: "area:lean:subverso"
        description: "SubVerso (syntax highlighting, O(1) indexed lookups)"
        contexts: [issues]
      - name: "area:lean:lakefile"
        description: "lakefile.toml, Lake facets, lake build"
        contexts: [issues]
      - name: "area:lean:manifest"
        description: "manifest.json schema, artifact aggregation"
        contexts: [issues]
      - name: "area:lean:dressed-artifacts"
        description: ".lake/build/dressed/ output (decl.html, decl.json, hovers)"
        contexts: [issues]

  # ===========================================================================
  # loop -- Where in the self-improvement cycle
  # ===========================================================================
  loop:
    description: "Where in the self-improvement cycle"
    color: "#283593"
    entries:
      - name: "loop:work"
        description: "About the doing/execution phase"
        contexts: [issues]
      - name: "loop:archive"
        description: "About data capture, storage, entry model"
        contexts: [issues]
      - name: "loop:analyze"
        description: "About analysis tooling, pattern detection"
        contexts: [issues]
      - name: "loop:improve"
        description: "About applying findings, closing the loop"
        contexts: [issues]
      - name: "loop:meta"
        description: "About improving the improvement process itself"
        contexts: [issues]
      - name: "loop:alignment"
        description: "About human-agent alignment mechanisms"
        contexts: [issues]
      - name: "loop:orchestration"
        description: "About skill coordination, state machine, handoffs"
        contexts: [issues]

  # ===========================================================================
  # impact -- What does this affect (multi-select encouraged)
  # ===========================================================================
  impact:
    description: "What does this affect (multi-select encouraged)"
    color: "#1B5E20"
    entries:
      - name: "impact:visual"
        description: "Changes what the user sees"
        contexts: [issues]
      - name: "impact:functional"
        description: "Changes behavior/logic"
        contexts: [issues]
      - name: "impact:performance"
        description: "Affects build time, response time, throughput"
        contexts: [issues]
      - name: "impact:dx"
        description: "Developer/agent experience"
        contexts: [issues]
      - name: "impact:data-quality"
        description: "Richness or accuracy of archived data"
        contexts: [issues]
      - name: "impact:alignment"
        description: "Human-agent alignment mechanisms"
        contexts: [issues]
      - name: "impact:soundness"
        description: "Mathematical correctness, verification integrity"
        contexts: [issues]
      - name: "impact:portability"
        description: "Affects SLS extraction / generalization"
        contexts: [issues]
      - name: "impact:ux"
        description: "End-user experience of generated sites"
        contexts: [issues]
      - name: "impact:observability"
        description: "Ability to understand system state and history"
        contexts: [issues]
      - name: "impact:friction-reduction"
        description: "Removes a known friction point when resolved"
        contexts: [issues]

  # ===========================================================================
  # scope -- Breadth and type of changes
  # ===========================================================================
  scope:
    description: "Breadth and type of changes"
    color: "#795548"
    entries:
      # --- Issue-only entries ---
      - name: "scope:architectural"
        description: "Changes fundamental design patterns"
        contexts: [issues]
      - name: "scope:config-only"
        description: "Only touches configuration files"
        contexts: [issues]
      # --- Archive-only entries ---
      - name: "scope:multi-repo"
        description: "Changes touched 2 repositories"
        contexts: [archive]
        scope: both
      - name: "scope:docs-only"
        description: "Only documentation files were modified"
        contexts: [archive]
        scope: both
      - name: "scope:code-only"
        description: "Only code files were modified (no docs)"
        contexts: [archive]
        scope: both
      - name: "scope:mixed"
        description: "Both code and documentation files were modified"
        contexts: [archive]
        scope: both
      - name: "scope:css-js"
        description: "Changes included CSS or JavaScript assets"
        contexts: [archive]
        scope: both
      - name: "scope:lean"
        description: "Changes included Lean source files"
        contexts: [archive]
        scope: both
      - name: "scope:python"
        description: "Changes included Python source files"
        contexts: [archive]
        scope: both
      - name: "scope:config"
        description: "Changes included configuration files"
        contexts: [archive]
        scope: both
      - name: "scope:wide"
        description: "Changes touched 10+ files across multiple concerns"
        contexts: [archive]
        scope: both
      - name: "scope:narrow"
        description: "Changes confined to 3 or fewer files"
        contexts: [archive]
        scope: both
      # --- Shared entries ---
      - name: "scope:single-repo"
        description: "Contained to one repository"
        contexts: [both]
        scope: both
      - name: "scope:cross-repo"
        description: "Spans multiple repos in dependency chain"
        contexts: [both]
        scope: both

  # ===========================================================================
  # pillar -- Which self-improvement analysis pillar
  # ===========================================================================
  pillar:
    description: "Which self-improvement analysis pillar"
    color: "#311B92"
    entries:
      - name: "pillar:user-effectiveness"
        description: "P1: How well the system serves the user"
        contexts: [issues]
      - name: "pillar:claude-execution"
        description: "P2: How efficiently Claude performs tasks"
        contexts: [issues]
      - name: "pillar:alignment-patterns"
        description: "P3: How well user and Claude stay aligned"
        contexts: [issues]
      - name: "pillar:system-engineering"
        description: "P4: How well tooling supports the work"
        contexts: [issues]

  # ===========================================================================
  # project -- Which showcase project surfaces this
  # ===========================================================================
  project:
    description: "Which showcase project surfaces this"
    color: "#880E4F"
    entries:
      - name: "project:sbs-test"
        description: "Surfaces in SBS-Test (33 nodes, feature testing)"
        contexts: [issues]
      - name: "project:gcr"
        description: "Surfaces in GCR (57 nodes, production validation)"
        contexts: [issues]
      - name: "project:pnt"
        description: "Surfaces in PNT (591 nodes, scale testing)"
        contexts: [issues]

  # ===========================================================================
  # friction -- What kind of pain point does this address
  # ===========================================================================
  friction:
    description: "What kind of pain point does this address"
    color: "#BF360C"
    entries:
      - name: "friction:context-loss"
        description: "Compaction killed context, state recovery failed"
        contexts: [issues]
      - name: "friction:alignment-gap"
        description: "User and agent had different understanding"
        contexts: [issues]
      - name: "friction:tooling-gap"
        description: "Needed capability that didn't exist"
        contexts: [issues]
      - name: "friction:slow-feedback"
        description: "Build/validation/iteration cycle too slow"
        contexts: [issues]
      - name: "friction:manual-step"
        description: "Something that should be automated"
        contexts: [issues]
      - name: "friction:cross-repo"
        description: "Submodule dance, dependency chain rebuilds"
        contexts: [issues]
      - name: "friction:state-confusion"
        description: "Unclear system state, orphaned sessions"
        contexts: [issues]
      - name: "friction:signal-noise"
        description: "Useful information buried in noise"
        contexts: [issues]
      - name: "friction:repeated-work"
        description: "Same task done multiple times"
        contexts: [issues]
      - name: "friction:missing-data"
        description: "Couldn't analyze because data wasn't captured"
        contexts: [issues]
      - name: "friction:cognitive-load"
        description: "Too many things to hold in mind"
        contexts: [issues]
      - name: "friction:permission-boundary"
        description: "Hook blocked action, sandbox limitation"
        contexts: [issues]

  # ===========================================================================
  # phase -- Skill lifecycle phase active when entry was created
  # ===========================================================================
  phase:
    description: "Skill lifecycle phase active when entry was created"
    entries:
      - name: "phase:alignment"
        description: "In alignment/Q&A phase of a skill"
        contexts: [archive]
        scope: entry
      - name: "phase:planning"
        description: "In planning phase of a skill"
        contexts: [archive]
        scope: entry
      - name: "phase:execution"
        description: "In execution phase of a skill"
        contexts: [archive]
        scope: entry
      - name: "phase:finalization"
        description: "In finalization phase of a skill"
        contexts: [archive]
        scope: entry
      - name: "phase:readme-wave"
        description: "In README update wave of update-and-archive"
        contexts: [archive]
        scope: entry
      - name: "phase:oracle-regen"
        description: "In oracle regeneration phase of update-and-archive"
        contexts: [archive]
        scope: entry
      - name: "phase:porcelain"
        description: "In porcelain/git-sync phase of update-and-archive"
        contexts: [archive]
        scope: entry
      - name: "phase:archive-upload"
        description: "In archive upload phase of update-and-archive"
        contexts: [archive]
        scope: entry
      - name: "phase:idle"
        description: "No skill active, system is idle between tasks"
        contexts: [archive]
        scope: entry

  # ===========================================================================
  # transition -- State machine transition type for this entry
  # ===========================================================================
  transition:
    description: "State machine transition type recorded in this entry"
    entries:
      - name: "transition:phase-start"
        description: "Entry marks the start of a new phase"
        contexts: [archive]
        scope: entry
      - name: "transition:phase-end"
        description: "Entry marks the end of a phase"
        contexts: [archive]
        scope: entry
      - name: "transition:handoff"
        description: "Atomic skill-to-skill handoff occurred"
        contexts: [archive]
        scope: entry
      - name: "transition:epoch-close"
        description: "Entry closes an epoch (update-and-archive completion)"
        contexts: [archive]
        scope: entry
      - name: "transition:backward"
        description: "Phase regression detected (went back to earlier phase)"
        contexts: [archive]
        scope: entry
      - name: "transition:phase-fail"
        description: "Phase failed without completing (e.g., gate failure, error)"
        contexts: [archive]
        scope: entry
      - name: "transition:none"
        description: "No state transition in this entry"
        contexts: [archive]
        scope: entry

  # ===========================================================================
  # skill -- Which skill was active when entry was created
  # ===========================================================================
  skill:
    description: "Which skill was active when the entry was created"
    entries:
      - name: "skill:task"
        description: "The /task skill was active"
        contexts: [archive]
        scope: both
      - name: "skill:self-improve"
        description: "The /self-improve skill was active"
        contexts: [archive]
        scope: both
      - name: "skill:update-and-archive"
        description: "The /update-and-archive skill was active"
        contexts: [archive]
        scope: both
      - name: "skill:log"
        description: "The /log skill was active"
        contexts: [archive]
        scope: both
      - name: "skill:none"
        description: "No skill was active (idle state)"
        contexts: [archive]
        scope: both

  # ===========================================================================
  # trigger -- What caused this archive entry to be created
  # ===========================================================================
  trigger:
    description: "What caused this archive entry to be created"
    entries:
      - name: "trigger:build"
        description: "Entry created by a build pipeline run"
        contexts: [archive]
        scope: both
      - name: "trigger:skill"
        description: "Entry created by a skill lifecycle event"
        contexts: [archive]
        scope: both
      - name: "trigger:manual"
        description: "Entry created by manual sbs archive upload"
        contexts: [archive]
        scope: both
      - name: "trigger:improvement"
        description: "Entry created by mid-session improvement capture"
        contexts: [archive]
        scope: both

  # ===========================================================================
  # session -- Behavioral profile of the Claude Code session
  # ===========================================================================
  session:
    description: "Behavioral profile of the Claude Code session"
    entries:
      - name: "session:exploration-heavy"
        description: "Session dominated by file reads and searches"
        contexts: [archive]
        scope: session
      - name: "session:edit-heavy"
        description: "Session dominated by file edits and writes"
        contexts: [archive]
        scope: session
      - name: "session:creation-heavy"
        description: "Session dominated by new file creation"
        contexts: [archive]
        scope: session
      - name: "session:bash-heavy"
        description: "Session dominated by shell command execution"
        contexts: [archive]
        scope: session
      - name: "session:mcp-heavy"
        description: "Session dominated by MCP tool calls"
        contexts: [archive]
        scope: session
      - name: "session:search-heavy"
        description: "Session dominated by grep/glob/search operations"
        contexts: [archive]
        scope: session
      - name: "session:delegation-heavy"
        description: "Session dominated by agent spawning and orchestration"
        contexts: [archive]
        scope: session
      - name: "session:interactive"
        description: "Session had significant back-and-forth with user"
        contexts: [archive]
        scope: session
      - name: "session:one-shot"
        description: "Session completed in a single agent turn"
        contexts: [archive]
        scope: session
      - name: "session:multi-session"
        description: "Work spanned multiple Claude Code sessions"
        contexts: [archive]
        scope: session
      - name: "session:long"
        description: "Session duration exceeded 30 minutes"
        contexts: [archive]
        scope: session
      - name: "session:short"
        description: "Session duration under 5 minutes"
        contexts: [archive]
        scope: session
      - name: "session:tool-diverse"
        description: "Session used 10+ unique tool types"
        contexts: [archive]
        scope: session
      - name: "session:tool-narrow"
        description: "Session used fewer than 4 unique tool types"
        contexts: [archive]
        scope: session

  # ===========================================================================
  # outcome -- Observable results of the session or skill
  # ===========================================================================
  outcome:
    description: "Observable results of the session or skill"
    entries:
      - name: "outcome:gate-pass"
        description: "Gate validation passed"
        contexts: [archive]
        scope: entry
      - name: "outcome:gate-fail"
        description: "Gate validation failed"
        contexts: [archive]
        scope: entry
      - name: "outcome:gate-override"
        description: "Gate failure was overridden by user"
        contexts: [archive]
        scope: entry
      - name: "outcome:build-success"
        description: "Project build completed successfully"
        contexts: [archive]
        scope: both
      - name: "outcome:build-fail"
        description: "Project build failed"
        contexts: [archive]
        scope: both
      - name: "outcome:pr-created"
        description: "A pull request was created during this session"
        contexts: [archive]
        scope: entry
      - name: "outcome:pr-merged"
        description: "A pull request was merged during this session"
        contexts: [archive]
        scope: entry
      - name: "outcome:issue-created"
        description: "A GitHub issue was created during this session"
        contexts: [archive]
        scope: both
      - name: "outcome:issue-closed"
        description: "A GitHub issue was closed during this session"
        contexts: [archive]
        scope: both
      - name: "outcome:clean-execution"
        description: "Task completed without retries or corrections"
        contexts: [archive]
        scope: session
      - name: "outcome:had-retries"
        description: "Task required retries or error recovery"
        contexts: [archive]
        scope: session
      - name: "outcome:task-completed"
        description: "The skill/task reached successful completion"
        contexts: [archive]
        scope: entry
      - name: "outcome:task-incomplete"
        description: "The skill/task did not reach completion"
        contexts: [archive]
        scope: entry
      - name: "outcome:quality-improved"
        description: "Quality scores improved vs previous entry"
        contexts: [archive]
        scope: entry
      - name: "outcome:quality-regressed"
        description: "Quality scores decreased vs previous entry"
        contexts: [archive]
        scope: entry
      - name: "outcome:quality-stable"
        description: "Quality scores unchanged vs previous entry"
        contexts: [archive]
        scope: entry
      - name: "outcome:scope-expanded"
        description: "Plan files were modified during execution phase (scope creep)"
        contexts: [archive]
        scope: both
      - name: "outcome:build-after-fix-failed"
        description: "Build failed after recent file edits (fix attempt unsuccessful)"
        contexts: [archive]
        scope: both

  # ===========================================================================
  # signal -- Anomaly or attention signals detected
  # ===========================================================================
  signal:
    description: "Anomaly or attention signals detected in the session"
    entries:
      - name: "signal:backward-transition"
        description: "Phase regression detected in state machine"
        contexts: [archive]
        scope: entry
      - name: "signal:consecutive-bash-failures"
        description: "3+ bash commands failed in a row without success between them"
        contexts: [archive]
        scope: session
      - name: "signal:same-command-retry"
        description: "Same command (tool+file) executed 3+ times in a session"
        contexts: [archive]
        scope: session
      - name: "signal:cli-misfire"
        description: "CLI argument errors detected in session"
        contexts: [archive]
        scope: session
      - name: "signal:max-tokens-hit"
        description: "Session hit the maximum token limit"
        contexts: [archive]
        scope: session
      - name: "signal:context-compaction"
        description: "Context window compaction occurred mid-session"
        contexts: [archive]
        scope: session
      - name: "signal:user-correction"
        description: "User corrected or redirected agent behavior"
        contexts: [archive]
        scope: entry
      - name: "signal:retry-loop"
        description: "Agent attempted the same operation 3+ times"
        contexts: [archive]
        scope: session
      - name: "signal:high-churn"
        description: "Files were edited then reverted or re-edited repeatedly"
        contexts: [archive]
        scope: session
      - name: "signal:sync-error"
        description: "Git sync or push operation failed"
        contexts: [archive]
        scope: entry
      - name: "signal:stale-metrics"
        description: "Quality metrics are stale (not updated recently)"
        contexts: [archive]
        scope: entry

  # ===========================================================================
  # repo -- Which repositories were touched
  # ===========================================================================
  repo:
    description: "Which repositories were touched in this session"
    entries:
      - name: "repo:dress"
        description: "Dress repository was modified"
        contexts: [archive]
        scope: both
      - name: "repo:runway"
        description: "Runway repository was modified"
        contexts: [archive]
        scope: both
      - name: "repo:sbs-test"
        description: "SBS-Test repository was modified"
        contexts: [archive]
        scope: both
      - name: "repo:gcr"
        description: "GCR (General Crystallographic Restriction) was modified"
        contexts: [archive]
        scope: both
      - name: "repo:pnt"
        description: "PNT (PrimeNumberTheoremAnd) was modified"
        contexts: [archive]
        scope: both
      - name: "repo:verso"
        description: "Verso fork was modified"
        contexts: [archive]
        scope: both
      - name: "repo:subverso"
        description: "SubVerso fork was modified"
        contexts: [archive]
        scope: both
      - name: "repo:lean-architect"
        description: "LeanArchitect fork was modified"
        contexts: [archive]
        scope: both
      - name: "repo:dress-blueprint-action"
        description: "dress-blueprint-action (CI/CD + assets) was modified"
        contexts: [archive]
        scope: both
      - name: "repo:sbs-lsp-mcp"
        description: "sbs-lsp-mcp server was modified"
        contexts: [archive]
        scope: both
      - name: "repo:dev-scripts"
        description: "dev/scripts Python tooling was modified"
        contexts: [archive]
        scope: both
      - name: "repo:dev-storage"
        description: "dev/storage data or config was modified"
        contexts: [archive]
        scope: both

  # ===========================================================================
  # epoch -- Position and character of the current epoch
  # ===========================================================================
  epoch:
    description: "Position and character of the current epoch"
    entries:
      - name: "epoch:opening"
        description: "First entry in a new epoch"
        contexts: [archive]
        scope: entry
      - name: "epoch:closing"
        description: "Final entry closing this epoch"
        contexts: [archive]
        scope: entry
      - name: "epoch:long"
        description: "Epoch spans 20+ entries"
        contexts: [archive]
        scope: entry
      - name: "epoch:short"
        description: "Epoch spans fewer than 5 entries"
        contexts: [archive]
        scope: entry
      - name: "epoch:build-heavy"
        description: "Epoch contains 3+ build-triggered entries"
        contexts: [archive]
        scope: entry
      - name: "epoch:no-builds"
        description: "Epoch contains zero build-triggered entries"
        contexts: [archive]
        scope: entry

  # ===========================================================================
  # linkage -- GitHub artifact linkage
  # ===========================================================================
  linkage:
    description: "GitHub artifact linkage for this entry"
    entries:
      - name: "linkage:has-issue"
        description: "Entry references at least one GitHub issue"
        contexts: [archive]
        scope: entry
      - name: "linkage:has-pr"
        description: "Entry references at least one pull request"
        contexts: [archive]
        scope: entry
      - name: "linkage:has-plan"
        description: "A plan file was active during this session"
        contexts: [archive]
        scope: both
      - name: "linkage:issue-driven"
        description: "Task was initiated from a GitHub issue"
        contexts: [archive]
        scope: both
      - name: "linkage:multi-issue"
        description: "Entry references 2+ GitHub issues"
        contexts: [archive]
        scope: entry
      - name: "linkage:standalone"
        description: "No issue or PR references"
        contexts: [archive]
        scope: entry

  # ===========================================================================
  # token -- Token usage profile
  # ===========================================================================
  token:
    description: "Token usage profile for the session"
    entries:
      - name: "token:input-heavy"
        description: "Input tokens exceeded 500K"
        contexts: [archive]
        scope: session
      - name: "token:output-heavy"
        description: "Output tokens exceeded 50K"
        contexts: [archive]
        scope: session
      - name: "token:cache-efficient"
        description: "Cache read tokens exceeded 50% of input tokens"
        contexts: [archive]
        scope: session
      - name: "token:cache-unused"
        description: "Cache read tokens below 10% of input tokens"
        contexts: [archive]
        scope: session
      - name: "token:total-heavy"
        description: "Total tokens exceeded 1M"
        contexts: [archive]
        scope: session
      - name: "token:total-light"
        description: "Total tokens under 100K"
        contexts: [archive]
        scope: session
      - name: "token:efficient"
        description: "High output-to-input ratio (productive session)"
        contexts: [archive]
        scope: session

  # ===========================================================================
  # thinking -- Extended thinking usage
  # ===========================================================================
  thinking:
    description: "Extended thinking usage in the session"
    entries:
      - name: "thinking:heavy"
        description: "10+ thinking blocks used in session"
        contexts: [archive]
        scope: session
      - name: "thinking:none"
        description: "No thinking blocks used"
        contexts: [archive]
        scope: session
      - name: "thinking:extended"
        description: "At least one thinking block exceeded 2K tokens"
        contexts: [archive]
        scope: session
      - name: "thinking:deep"
        description: "Average thinking block exceeded 1K tokens"
        contexts: [archive]
        scope: session

  # ===========================================================================
  # tool -- Tool usage patterns
  # ===========================================================================
  tool:
    description: "Tool usage patterns in the session"
    entries:
      - name: "tool:read-dominant"
        description: "Read/file-access tools were the most used category"
        contexts: [archive]
        scope: session
      - name: "tool:edit-dominant"
        description: "Edit/write tools were the most used category"
        contexts: [archive]
        scope: session
      - name: "tool:bash-dominant"
        description: "Bash tool was the most used tool"
        contexts: [archive]
        scope: session
      - name: "tool:task-dominant"
        description: "Task/agent spawning was the most used tool"
        contexts: [archive]
        scope: session
      - name: "tool:failure-rate-high"
        description: "More than 20% of tool calls returned errors"
        contexts: [archive]
        scope: session
      - name: "tool:failure-rate-zero"
        description: "Zero tool call failures in session"
        contexts: [archive]
        scope: session
      - name: "tool:slow-operations"
        description: "Session included operations that timed out or took >60s"
        contexts: [archive]
        scope: session

  # ===========================================================================
  # quality -- Quality score state
  # ===========================================================================
  quality:
    description: "Quality score state for this entry"
    entries:
      - name: "quality:high"
        description: "Overall quality score above 0.9"
        contexts: [archive]
        scope: entry
      - name: "quality:low"
        description: "Overall quality score below 0.7"
        contexts: [archive]
        scope: entry
      - name: "quality:all-pass"
        description: "All deterministic validators passed"
        contexts: [archive]
        scope: entry
      - name: "quality:t5-fail"
        description: "T5 (status color match) validator failed"
        contexts: [archive]
        scope: entry
      - name: "quality:t6-fail"
        description: "T6 (CSS variable coverage) validator failed"
        contexts: [archive]
        scope: entry
      - name: "quality:unscored"
        description: "No quality scores available for this entry"
        contexts: [archive]
        scope: entry

  # ===========================================================================
  # model -- Model usage
  # ===========================================================================
  model:
    description: "Model usage in the session"
    entries:
      - name: "model:opus"
        description: "Opus model was used (primary or only)"
        contexts: [archive]
        scope: session
      - name: "model:sonnet"
        description: "Sonnet model was used (primary or only)"
        contexts: [archive]
        scope: session
      - name: "model:haiku"
        description: "Haiku model was used (primary or only)"
        contexts: [archive]
        scope: session
      - name: "model:multi-model"
        description: "Multiple model versions were used in session"
        contexts: [archive]
        scope: session
      - name: "model:single-model"
        description: "Only one model version was used in session"
        contexts: [archive]
        scope: session

  # ===========================================================================
  # improvement -- Improvement opportunity classification
  # ===========================================================================
  improvement:
    description: "Improvement opportunity captured mid-session"
    entries:
      - name: "improvement:process"
        description: "Process or workflow improvement idea"
        contexts: [archive]
        scope: entry
      - name: "improvement:interaction"
        description: "Human-AI interaction pattern improvement"
        contexts: [archive]
        scope: entry
      - name: "improvement:workflow"
        description: "Workflow automation or friction reduction"
        contexts: [archive]
        scope: entry
      - name: "improvement:tooling"
        description: "Tooling or infrastructure improvement"
        contexts: [archive]
        scope: entry
      - name: "improvement:other"
        description: "Uncategorized improvement observation"
        contexts: [archive]
        scope: entry

standalone:
  - name: "ai-authored"
    color: "#7B68EE"
    description: "Created by AI agent"
    contexts: [issues]
  - name: "crush:ignore"
    color: "#808080"
    description: "Issue excluded from /task crush batch processing"
    contexts: [issues]
